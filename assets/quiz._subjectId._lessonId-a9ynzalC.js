import{w as J,y as _,a as c,p as e}from"./chunk-EPOLDU6W-BH1RGhcj.js";import{B as u}from"./button-kqWwR707.js";import{C as q,a as C,b as S,e as k,B as h}from"./createLucideIcon-DS1iclBf.js";import{A as z,C as A,a as I,P as D,b as H}from"./alert-Cc3ge4mz.js";import{A as f,C as W}from"./clock-DAK662LB.js";import"./index-8fThPYGH.js";async function Z({params:i}){const[j,s]=await Promise.all([fetch("/data/quizzes.json"),fetch("/data/subjects.json")]),m=await j.json(),b=await s.json(),o=m.find(a=>a.subjectId===i.subjectId&&a.lessonId===i.lessonId),n=b.find(a=>a.id===i.subjectId),l=n?.lessons.find(a=>a.id===i.lessonId);if(!o||!n||!l)throw new Response("Quiz not found",{status:404});return{quiz:o,subject:n,lesson:l}}function ee({data:i}){return i?[{title:`${i.quiz.title} - EduKuis`},{name:"description",content:i.quiz.description}]:[{title:"Kuis - EduKuis"},{name:"description",content:"Kerjakan kuis"}]}const se=J(function({loaderData:j}){const{quiz:s,subject:m,lesson:b}=j,o=_(),[n,l]=c.useState(0),[a,K]=c.useState(new Array(s.questions.length).fill(null)),[g,$]=c.useState(s.timeLimit),[p,Q]=c.useState(!1),[N,F]=c.useState(!1);c.useEffect(()=>{if(!p||N)return;const r=setInterval(()=>{$(t=>t<=1?(w(),0):t-1)},1e3);return()=>clearInterval(r)},[p,N]);const L=()=>{Q(!0)},P=r=>{const t=[...a];t[n]=r,K(t)},M=()=>{n<s.questions.length-1&&l(n+1)},R=()=>{n>0&&l(n-1)},w=()=>{const r=T(),t=s.timeLimit-g;o(`/quiz/${m.id}/${b.id}/result`,{state:{score:r,totalQuestions:s.questions.length,correctAnswers:a.filter((d,B)=>d===s.questions[B].correctAnswer).length,answers:a,timeTaken:t,passingScore:s.passingScore}})},T=()=>{const r=a.filter((t,d)=>t===s.questions[d].correctAnswer).length;return Math.round(r/s.questions.length*100)},v=r=>{const t=Math.floor(r/60),d=r%60;return`${t}:${d.toString().padStart(2,"0")}`},y=s.questions[n],E=(n+1)/s.questions.length*100,x=a.filter(r=>r!==null).length;return p?e.jsxs("div",{className:"min-h-screen bg-linear-to-br from-blue-50 via-white to-purple-50",children:[e.jsx("header",{className:"border-b bg-white/80 backdrop-blur-sm sticky top-0 z-10",children:e.jsxs("div",{className:"container mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Soal ",n+1," dari ",s.questions.length]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(h,{variant:g<60?"destructive":"secondary",className:"text-lg px-4 py-2",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),v(g)]}),e.jsxs(h,{variant:"outline",className:"px-4 py-2",children:[x,"/",s.questions.length," Terjawab"]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(D,{value:E,className:"h-2"})})]})}),e.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs(q,{children:[e.jsxs(C,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(h,{variant:"outline",children:["Soal #",n+1]}),a[n]!==null&&e.jsxs(h,{variant:"secondary",children:[e.jsx(H,{className:"w-3 h-3 mr-1"}),"Terjawab"]})]}),e.jsx(S,{className:"text-2xl leading-relaxed",children:y.question})]}),e.jsx(k,{className:"space-y-4",children:y.options.map((r,t)=>e.jsx("button",{onClick:()=>P(t),className:`w-full p-4 text-left rounded-lg border-2 transition-all ${a[n]===t?"border-primary bg-primary/10":"border-border hover:border-primary/50 hover:bg-accent"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center font-bold ${a[n]===t?"border-primary bg-primary text-primary-foreground":"border-border"}`,children:String.fromCharCode(65+t)}),e.jsx("span",{className:"text-base",children:r})]})},t))})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[e.jsxs(u,{variant:"outline",onClick:R,disabled:n===0,children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Sebelumnya"]}),e.jsx("div",{className:"flex gap-2",children:s.questions.map((r,t)=>e.jsx("button",{onClick:()=>l(t),className:`w-8 h-8 rounded-full text-sm font-bold transition-all ${t===n?"bg-primary text-primary-foreground":a[t]!==null?"bg-green-100 text-green-700 border border-green-300":"bg-gray-100 text-gray-600 border border-gray-300"}`,children:t+1},t))}),n===s.questions.length-1?e.jsx(u,{onClick:w,disabled:x<s.questions.length,children:"Submit Kuis"}):e.jsxs(u,{onClick:M,children:["Selanjutnya",e.jsx(f,{className:"w-4 h-4 ml-2 rotate-180"})]})]}),x<s.questions.length&&e.jsxs(z,{className:"mt-4",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsxs(I,{children:["Masih ada ",s.questions.length-x," soal yang belum dijawab. Jawab semua soal untuk dapat submit kuis."]})]})]})]}):e.jsx("div",{className:"min-h-screen bg-linear-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:e.jsxs(q,{className:"max-w-2xl w-full",children:[e.jsxs(C,{children:[e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsxs(u,{variant:"ghost",size:"sm",onClick:()=>o(-1),children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Kembali"]})}),e.jsx(S,{className:"text-3xl",children:s.title}),e.jsx("p",{className:"text-muted-foreground mt-2",children:s.description})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Jumlah Soal"}),e.jsx("p",{className:"text-2xl font-bold",children:s.questions.length})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Waktu"}),e.jsx("p",{className:"text-2xl font-bold",children:v(s.timeLimit)})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"KKM"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.passingScore,"%"]})]}),e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Mata Pelajaran"}),e.jsx("p",{className:"text-lg font-bold",children:m.name})]})]}),e.jsxs(z,{children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx(I,{children:e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Jawab semua soal sebelum waktu habis"}),e.jsx("li",{children:"Anda dapat mengubah jawaban sebelum submit"}),e.jsx("li",{children:"Kuis akan otomatis submit jika waktu habis"}),e.jsxs("li",{children:["Nilai lulus minimal ",s.passingScore,"%"]})]})})]}),e.jsx(u,{className:"w-full",size:"lg",onClick:L,children:"Mulai Kuis"})]})]})})});export{Z as clientLoader,se as default,ee as meta};
